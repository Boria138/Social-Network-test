<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ======= Base ======= -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- âœ… iOS safe-area + prevent zoom -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">

    <title>Voxii</title>

    <!-- ======= SEO ======= -->
    <meta name="description" content="Real-time chat application with voice and video calls">
    <meta name="theme-color" content="#5865f2">
    <meta name="color-scheme" content="dark light">

    <!-- ======= PWA / iOS ======= -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">

    <!-- Optional (if you have them later) -->
    <!-- <link rel="manifest" href="/manifest.webmanifest"> -->
    <!-- <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png"> -->

    <!-- Icons -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’¬</text></svg>">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- âœ… Scripts: defer so DOM loads first -->
    <script defer src="https://cdn.jsdelivr.net/npm/@twemoji/api@latest/dist/twemoji.min.js" crossorigin="anonymous"></script>
    <script defer src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

    <!-- Prism.js for syntax highlighting (core only, styles are custom) -->
    <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body>

    <noscript>
        <div style="padding:12px; font-family:system-ui; background:#111; color:#fff;">
            Voxii requires JavaScript to run.
        </div>
    </noscript>

    <!-- âœ… Drawer overlay for mobile channels drawer -->
    <div class="drawer-overlay" id="drawerOverlay" aria-hidden="true"></div>

    <!-- DM List (Left Sidebar) -->
    <div class="server-list" aria-label="Servers">
        <div class="server-icon home active" id="friendsBtn"
             title="Friends" data-i18n-title="nav.friends" aria-label="Friends" role="button" tabindex="0">
            <svg width="28" height="28" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path fill="currentColor" d="M14 8.00598C14 10.211 12.206 12.006 10 12.006C7.795 12.006 6 10.211 6 8.00598C6 5.80098 7.795 4.00598 10 4.00598C12.206 4.00598 14 5.80098 14 8.00598ZM2 19.006C2 15.473 5.29 13.006 10 13.006C14.711 13.006 18 15.473 18 19.006V20.006H2V19.006Z"/>
                <path fill="currentColor" d="M20.0001 20.006H22.0001V19.006C22.0001 16.4433 20.2697 14.4415 17.5213 13.5352C19.0621 14.4488 20.0001 16.0865 20.0001 18.006V20.006Z"/>
                <path fill="currentColor" d="M14.8834 11.9077C16.6657 11.5044 18.0001 9.9077 18.0001 8.00598C18.0001 5.80098 16.2051 4.00598 14.0001 4.00598C13.6395 4.00598 13.2931 4.06115 12.9687 4.16115C13.6061 5.03115 14.0001 6.12115 14.0001 8.00598C14.0001 9.88598 13.6061 10.9785 12.9687 11.8485C13.2931 11.9485 13.6395 12.006 14.0001 12.006C14.3001 12.006 14.5961 11.9727 14.8834 11.9077Z"/>
            </svg>
        </div>
    </div>

    <!-- Channel List / DM List (Second Sidebar) -->
    <div class="channel-list" id="channelList" aria-label="Channels">
        <div class="server-header" id="serverHeader">
            <div class="server-name" id="serverName" data-i18n="nav.friends">Friends</div>

            <!-- âœ… Language switcher -->
            <div class="lang-switch" style="margin-left:auto; display:flex; gap:8px; align-items:center;" aria-label="Language switch">
                <button type="button" class="control-btn" id="langRuBtn"
                        data-lang="ru" title="Ð ÑƒÑÑÐºÐ¸Ð¹" aria-label="Ð ÑƒÑÑÐºÐ¸Ð¹"
                        style="padding:6px 10px; font-size:12px;">RU</button>

                <button type="button" class="control-btn" id="langEnBtn"
                        data-lang="en" title="English" aria-label="English"
                        style="padding:6px 10px; font-size:12px;">EN</button>
            </div>
        </div>

        <!-- DM List (shown in Friends view) -->
        <div id="dmListView" class="dm-list-view">
            <div class="dm-search-bar">
                <input type="text"
                       placeholder="Find or start a conversation"
                       data-i18n-placeholder="dm.search"
                       aria-label="Search conversations">
            </div>

            <div class="channel-category">
                <div class="category-header">
                    <span data-i18n="dm.directMessages">DIRECT MESSAGES</span>
                </div>
                <div id="dmList" class="dm-list" role="list">
                    <!-- DM items will be added here -->
                </div>
            </div>
        </div>

        <div class="user-panel" aria-label="User panel">
            <div class="user-info">
                <div class="user-avatar" aria-hidden="true">
                    <div class="user-avatar-content">U</div>
                </div>
                <div class="user-details">
                    <div class="username">User#0001</div>
                    <div class="user-status" data-i18n="status.online">Online</div>
                </div>
            </div>

            <div class="user-controls" aria-label="User controls">
                <button type="button" class="control-btn" id="themeToggleBtn"
                        title="Change Theme" data-i18n-title="actions.changeTheme" aria-label="Change Theme">
                    <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path fill="currentColor" d="M12,2A7,7,0,0,0,5,9c0,6.15,7,13,7,13s7-6.85,7-13A7,7,0,0,0,12,2Zm0,9.5a2.5,2.5,0,0,1,0-5,2.5,2.5,0,0,1,0,5Z"/>
                    </svg>
                </button>

                <button type="button" class="control-btn" id="muteBtn"
                        title="Mute" data-i18n-title="actions.mute" aria-label="Mute">
                    <svg class="icon-normal" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path fill="currentColor" d="M12 2C10.895 2 10 2.895 10 4V12C10 13.105 10.895 14 12 14C13.105 14 14 13.105 14 12V4C14 2.895 13.105 2 12 2ZM19 10V12C19 15.866 15.866 19 12 19C8.134 19 5 15.866 5 12V10H3V12C3 16.418 6.269 20.099 10.5 20.856V24H13.5V20.856C17.731 20.099 21 16.418 21 12V10H19Z"/>
                    </svg>
                    <svg class="icon-slashed" style="display: none;" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path fill="currentColor" d="M12 14c1.105 0 2-.895 2-2V4c0-1.105-.895-2-2-2s-2 .895-2 2v8c0 1.105.895 2 2 2zM19 12v-2h-2v2c0 2.757-1.79 5.08-4.2 5.86v2.006h2.2v2H9.5v-2h2.2V17.86C9.29 17.08 7.5 14.757 7.5 12V10H5v2c0 3.53 2.61 6.43 6 6.92V22h2v-3.08c3.39-.49 6-3.39 6-6.92zm-2.293-9.293l-1.414-1.414L3 13.586l1.414 1.414L16.707 2.707z"/>
                    </svg>
                </button>

                <button type="button" class="control-btn" id="deafenBtn"
                        title="Deafen" data-i18n-title="actions.deafen" aria-label="Deafen">
                    <svg class="icon-normal" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path fill="currentColor" d="M3 10v4c0 .55.45 1 1 1h3l5 5V4L7 9H4c-.55 0-1 .45-1 1zm16.5 2c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM16 4.27v15.46c2.28-.94 4-3.25 4-5.99s-1.72-5.05-4-5.99z"/>
                    </svg>
                    <svg class="icon-slashed" style="display: none;" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path fill="currentColor" d="M3 10v4c0 .55.45 1 1 1h3l5 5V4L7 9H4c-.55 0-1 .45-1 1zm16.5 2c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM16 4.27v15.46c2.28-.94 4-3.25 4-5.99s-1.72-5.05-4-5.99zM4.707 2.293L3.293 3.707 21.293 21.707l1.414-1.414L4.707 2.293z"/>
                    </svg>
                </button>

                <button type="button" class="control-btn" id="settingsBtn"
                        title="Settings" data-i18n-title="actions.settings" aria-label="Settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path fill="currentColor" d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6s3.6 1.62 3.6 3.6S13.98 15.6 12 15.6z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <main class="main-content" role="main">
        <!-- DM Chat View -->
        <div id="chatView" class="chat-view" style="display: none;">
            <div class="chat-header">
                <!-- âœ… Burger (mobile) -->
                <button type="button" class="mobile-menu-btn icon-btn" id="mobileMenuBtnChat"
                        aria-label="Open channels" data-i18n-title="actions.menu" title="Menu">
                    <svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path fill="currentColor" d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/>
                    </svg>
                </button>

                <div class="channel-info" id="chatHeaderInfo"></div>
                <div class="chat-controls"></div>
            </div>

            <div class="messages" id="messagesContainer" aria-label="Messages"></div>

            <div class="message-input-container" aria-label="Message input">
                <div class="message-input-wrapper">
                    <button type="button" class="attach-btn" data-i18n-title="actions.attach" title="Attach" aria-label="Attach">
                        <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                            <path fill="currentColor" d="M12 2C11.5 2 11 2.19 10.59 2.59L2.59 10.59C1.8 11.37 1.8 12.63 2.59 13.41C3.37 14.2 4.63 14.2 5.41 13.41L11 7.83V16C11 16.55 11.45 17 12 17C12.55 17 13 16.55 13 16V7.83L18.59 13.41C19.37 14.2 20.63 14.2 21.41 13.41C22.2 12.63 22.2 11.37 21.41 10.59L13.41 2.59C13 2.19 12.5 2 12 2Z"/>
                        </svg>
                    </button>

                    <textarea id="messageInput"
                              placeholder="Message..."
                              data-i18n-placeholder="chat.message"
                              rows="1"
                              aria-label="Type a message"></textarea>

                    <button type="button" class="emoji-btn" data-i18n-title="actions.emoji" title="Emoji" aria-label="Emoji">
                        <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                            <path fill="currentColor" d="M12 2C6.486 2 2 6.486 2 12C2 17.514 6.486 22 12 22C17.514 22 22 17.514 22 12C22 6.486 17.514 2 12 2ZM15.5 8C16.328 8 17 8.672 17 9.5C17 10.328 16.328 11 15.5 11C14.672 11 14 10.328 14 9.5C14 8.672 14.672 8 15.5 8ZM8.5 8C9.328 8 10 8.672 10 9.5C10 10.328 9.328 11 8.5 11C7.672 11 7 10.328 7 9.5C7 8.672 7.672 8 8.5 8ZM12 17.5C9.656 17.5 7.586 16.019 6.673 13.852C6.594 13.643 6.673 13.407 6.852 13.266C7.031 13.125 7.281 13.117 7.469 13.242C8.766 14.109 10.352 14.5 12 14.5C13.648 14.5 15.234 14.109 16.531 13.242C16.719 13.117 16.969 13.125 17.148 13.266C17.327 13.407 17.406 13.643 17.327 13.852C16.414 16.019 14.344 17.5 12 17.5Z"/>
                        </svg>
                    </button>

                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²Ð¾Ð¹ Ð·Ð°Ð¿Ð¸ÑÐ¸ (Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ ÐºÐ¾Ð³Ð´Ð° Ð½ÐµÑ‚ Ñ‚ÐµÐºÑÑ‚Ð°) -->
                    <button type="button"
                            class="voice-record-btn"
                            id="voiceRecordBtn"
                            data-i18n-title="actions.voiceMessage"
                            title="Voice Message"
                            aria-label="Voice Message">
                    </button>

                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ñ‚ÐµÐºÑÑ‚Ð° (Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ ÐºÐ¾Ð³Ð´Ð° ÐµÑÑ‚ÑŒ Ñ‚ÐµÐºÑÑ‚) -->
                    <button type="button"
                            class="send-btn"
                            id="sendBtn"
                            data-i18n-title="actions.send"
                            title="Send"
                            aria-label="Send"
                            style="display: none;">
                    </button>
                </div>
            </div>
        </div>

        <!-- Friends View -->
        <div id="friendsView" class="friends-main-view" style="display: none;">
            <div class="friends-header">
                <!-- âœ… Burger (mobile) -->
                <button type="button" class="mobile-menu-btn icon-btn" id="mobileMenuBtnFriends"
                        aria-label="Open channels" data-i18n-title="actions.menu" title="Menu">
                    <svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path fill="currentColor" d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/>
                    </svg>
                </button>

                <div class="friends-tabs" role="tablist" aria-label="Friends tabs">
                    <button type="button" class="friends-tab active" data-tab="online" data-i18n="friends.online" role="tab" aria-selected="true">Online</button>
                    <button type="button" class="friends-tab" data-tab="all" data-i18n="friends.all" role="tab" aria-selected="false">All</button>
                    <button type="button" class="friends-tab" data-tab="pending" data-i18n="friends.pending" role="tab" aria-selected="false">Pending</button>
                    <button type="button" class="friends-tab" data-tab="add" data-i18n="friends.add" role="tab" aria-selected="false">Add Friend</button>
                </div>
            </div>

            <div class="friends-content-wrapper">
                <div id="friendsOnline" class="friends-list active-tab" role="tabpanel"></div>
                <div id="friendsAll" class="friends-list" role="tabpanel"></div>
                <div id="friendsPending" class="friends-list" role="tabpanel"></div>
                <div id="friendsAdd" class="friends-list" role="tabpanel">
                    <div class="add-friend-form">
                        <h3 data-i18n="friends.addTitle">ADD FRIEND</h3>
                        <p data-i18n="friends.addDesc">You can add friends by searching all users.</p>
                        <div class="add-friend-input-wrapper">
                            <input type="text" id="searchUserInput" placeholder="Search username" data-i18n-placeholder="friends.searchUser" aria-label="Search username" />
                            <button type="button" id="searchUserBtn" data-i18n="actions.search">Search</button>
                        </div>
                        <div id="searchResults" aria-live="polite"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Voice/Video Call Interface -->
    <div id="callInterface" class="call-interface hidden" aria-hidden="true">
        <div class="call-header">
            <div class="call-channel-name" data-i18n="call.voiceChannel">Voice Channel</div>
            <button type="button" class="close-call-btn" id="closeCallBtn" aria-label="Close" data-i18n-title="actions.close" title="Close">âœ•</button>
        </div>
        <div class="call-participants">
            <div class="participant">
                <video id="localVideo" autoplay muted playsinline></video>
                <div class="participant-name" data-i18n="call.you">You</div>
            </div>
            <div id="remoteParticipants"></div>
        </div>
        <div class="call-controls-main">
            <button type="button" id="toggleVideoBtn" class="call-control-btn" data-i18n-title="call.toggleVideo" title="Toggle Video">
                <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path fill="currentColor" d="M21 6.5L17 10.5V7C17 6.45 16.55 6 16 6H4C3.45 6 3 6.45 3 7V17C3 17.55 3.45 18 4 18H16C16.55 18 17 17.55 17 17V13.5L21 17.5V6.5Z"/></svg>
            </button>
            <button type="button" id="toggleAudioBtn" class="call-control-btn" data-i18n-title="call.toggleAudio" title="Toggle Audio">
                <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path fill="currentColor" d="M12 2C10.895 2 10 2.895 10 4V12C10 13.105 10.895 14 12 14C13.105 14 14 13.105 14 12V4C14 2.895 13.105 2 12 2ZM19 10V12C19 15.866 15.866 19 12 19C8.134 19 5 15.866 5 12V10H3V12C3 16.418 6.269 20.099 10.5 20.856V24H13.5V20.856C17.731 20.099 21 16.418 21 12V10H19Z"/></svg>
            </button>
            <button type="button" id="toggleScreenBtn" class="call-control-btn" data-i18n-title="call.toggleScreen" title="Share Screen">
                <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path fill="currentColor" d="M21 2H3C1.89 2 1 2.89 1 4V16C1 17.11 1.89 18 3 18H10V20H8V22H16V20H14V18H21C22.11 18 23 17.11 23 16V4C23 2.89 22.11 2 21 2ZM21 16H3V4H21V16Z"/></svg>
            </button>
        </div>
    </div>

    <!-- Incoming Call -->
    <div id="incomingCall" class="incoming-call hidden" aria-hidden="true">
        <div class="incoming-call-content" role="dialog" aria-label="Incoming call">
            <div class="caller-info">
                <div class="caller-avatar" aria-hidden="true"></div>
                <div class="caller-name"></div>
            </div>
            <p data-i18n="call.isCalling">is calling you...</p>
            <div class="incoming-call-actions">
                <button type="button" id="acceptCallBtn" class="call-action-btn accept" data-i18n="call.accept">Accept</button>
                <button type="button" id="rejectCallBtn" class="call-action-btn reject" data-i18n="call.decline">Decline</button>
            </div>
        </div>
    </div>

    <!-- Theme Selector Dropdown -->
    <div id="themeSelector" class="theme-selector" aria-hidden="true">
        <h3 data-i18n="theme.title">THEME & ACCENT COLOR</h3>

        <div class="theme-options" role="list">
            <div class="theme-option" data-theme="default" role="listitem" tabindex="0">
                <div class="theme-preview" style="background: linear-gradient(135deg, #0a0f18, #0c1322);"></div>
                <span data-i18n="theme.defaultDark">Default Dark</span>
            </div>
            <div class="theme-option" data-theme="midnight" role="listitem" tabindex="0">
                <div class="theme-preview" style="background: linear-gradient(135deg, #0a0a1a, #121226);"></div>
                <span data-i18n="theme.midnightBlue">Midnight Blue</span>
            </div>
            <div class="theme-option" data-theme="forest" role="listitem" tabindex="0">
                <div class="theme-preview" style="background: linear-gradient(135deg, #0a1a10, #0f2a1f);"></div>
                <span data-i18n="theme.forestGreen">Forest Green</span>
            </div>
            <div class="theme-option" data-theme="sunset" role="listitem" tabindex="0">
                <div class="theme-preview" style="background: linear-gradient(135deg, #1a0a1a, #261212);"></div>
                <span data-i18n="theme.sunsetPurple">Sunset Purple</span>
            </div>
            <div class="theme-option" data-theme="ocean" role="listitem" tabindex="0">
                <div class="theme-preview" style="background: linear-gradient(135deg, #0a1a26, #122626);"></div>
                <span data-i18n="theme.oceanBlue">Ocean Blue</span>
            </div>
            <div class="theme-option" data-theme="coffee" role="listitem" tabindex="0">
                <div class="theme-preview" style="background: linear-gradient(135deg, #261c14, #3c2a1f);"></div>
                <span data-i18n="theme.coffeeBrown">Coffee Brown</span>
            </div>
        </div>

        <div class="accent-colors" aria-label="Accent colors">
            <div class="accent-color selected" style="background-color: #8b5cf6;" data-accent="#8b5cf6" title="Purple" role="button" tabindex="0"></div>
            <div class="accent-color" style="background-color: #60a5fa;" data-accent="#60a5fa" title="Blue" role="button" tabindex="0"></div>
            <div class="accent-color" style="background-color: #34d399;" data-accent="#34d399" title="Green" role="button" tabindex="0"></div>
            <div class="accent-color" style="background-color: #fbbf24;" data-accent="#fbbf24" title="Yellow" role="button" tabindex="0"></div>
            <div class="accent-color" style="background-color: #f87171;" data-accent="#f87171" title="Red" role="button" tabindex="0"></div>
            <div class="accent-color" style="background-color: #ec4899;" data-accent="#ec4899" title="Pink" role="button" tabindex="0"></div>
        </div>

        <div class="custom-color-control">
            <label for="customColorPicker" data-i18n="theme.customColor">Custom Color:</label>
            <input type="color" id="customColorPicker" value="#8b5cf6" aria-label="Custom color picker">
            <button type="button" id="applyCustomColorBtn" data-i18n="actions.apply">Apply</button>
        </div>

        <div class="transparency-control">
            <label for="transparencySlider">
                <span data-i18n="theme.glassEffect">Glass Effect:</span>
                <span id="transparencyValue">86%</span>
            </label>
            <input type="range" id="transparencySlider" min="50" max="100" value="86" aria-label="Glass effect amount">
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="settings-modal" aria-hidden="true">
        <div class="settings-modal-content">
            <div class="settings-modal-header">
                <h2 data-i18n="settings.title">Settings</h2>
                <button type="button" class="settings-modal-close" id="closeSettingsModal" aria-label="Close">&times;</button>
            </div>
            <div class="settings-modal-body">
                <div class="settings-section">
                    <h3 data-i18n="settings.privacy">Privacy & Content</h3>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-label" data-i18n="settings.linkPreview">Link Previews</span>
                            <span class="setting-description" data-i18n="settings.linkPreviewDesc">Show preview cards for links in messages</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="linkPreviewToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <button type="button" id="clearHiddenPreviewsBtn" class="setting-btn" data-i18n="settings.clearHiddenPreviews">
                            Reset Hidden Previews
                        </button>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3 data-i18n="settings.account">Account</h3>
                    <div class="setting-item">
                        <button type="button" id="logoutBtn" class="setting-btn danger" data-i18n="settings.logout">
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- App scripts -->
    <script defer src="config.js"></script>
    <script defer src="reply-system.js"></script>
    <script defer src="script.js"></script>
</body>
</html>
